(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1281:function(t,e,r){var i=r(1571);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,r(19).default)("6b04c906",i,!0,{})},1570:function(t,e,r){"use strict";var i=r(1281);r.n(i).a},1571:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,".book-gallery[data-v-6b77ddc4]{border-radius:8px;height:100%;background-color:#fff;padding:24px 24px 0}@media screen and (min-width: 768px){.book-gallery[data-v-6b77ddc4]{padding:24px}}.gallery[data-v-6b77ddc4]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:hidden;max-height:100%;height:100%;background-color:#fff}.gallery-grid[data-v-6b77ddc4]{position:relative;-ms-flex:1 1 auto;flex:1 1 auto;overflow-y:auto;display:grid;-ms-flex-align:start;align-items:flex-start;grid-template-columns:1fr;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;margin-bottom:20px}@media screen and (min-width: 768px){.gallery-grid[data-v-6b77ddc4]{margin-bottom:0;grid-template-columns:1fr 200px}}.gallery-header[data-v-6b77ddc4]{margin-bottom:24px}.gallery-header .title[data-v-6b77ddc4]{display:block;font-size:18px;color:#222;line-height:18px;font-weight:500}.gallery-header .title.mobile[data-v-6b77ddc4]{text-align:center}.gallery-header .title.desktop[data-v-6b77ddc4]{display:none}@media screen and (min-width: 768px){.gallery-header .title.desktop[data-v-6b77ddc4]{font-size:20px;line-height:20px;display:block}.gallery-header .title.mobile[data-v-6b77ddc4]{display:none}}.gallery-slides[data-v-6b77ddc4]{position:relative;-webkit-overflow-scrolling:touch;white-space:nowrap;display:-ms-flexbox;display:flex;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory;overflow-x:auto;width:100%;margin:0 auto;padding-bottom:10px;white-space:nowrap;gap:10px;height:100%}.gallery-slides[data-v-6b77ddc4]::-webkit-scrollbar{display:none}@media screen and (min-width: 768px){.gallery-slides[data-v-6b77ddc4]{max-width:100%;max-height:100%;display:block;padding:36px;margin:unset;border-radius:12px 12px 0 0;background-color:#F2F3F6}.gallery-slides[data-v-6b77ddc4]::-webkit-scrollbar-track{border-radius:100px}.gallery-slides[data-v-6b77ddc4]::-webkit-scrollbar{display:block;cursor:pointer;width:5px}.gallery-slides[data-v-6b77ddc4]::-webkit-scrollbar-thumb{border-radius:100px;background:#78818d80}.gallery-slides[data-v-6b77ddc4]:hover::-webkit-scrollbar-thumb{background:#626b7780}}.gallery-slides .slide[data-v-6b77ddc4]{display:-ms-flexbox;display:flex;margin-bottom:10px;scroll-margin-top:10px;border-radius:12px;min-width:100%;height:100%;-ms-flex-item-align:end;align-self:flex-end;scroll-snap-align:start;scroll-behavior:smooth;margin:auto}@media screen and (min-width: 768px){.gallery-slides .slide[data-v-6b77ddc4]{min-width:auto;height:auto;margin:0 0 10px;scroll-snap-align:none}}.gallery-slides .slide[data-v-6b77ddc4]:last-child{margin-bottom:0}.gallery-slides .slide .slide-image[data-v-6b77ddc4]{width:100%;border-radius:8px;-o-object-fit:contain;object-fit:contain}.gallery-control-grid[data-v-6b77ddc4]{display:grid;grid-template-columns:repeat(auto-fill, 42px);gap:8px}.gallery-control-grid.gallery-control[data-v-6b77ddc4]{margin-bottom:32px}.gallery-controls[data-v-6b77ddc4]{display:none}@media screen and (min-width: 768px){.gallery-controls[data-v-6b77ddc4]{display:block}}.gallery-controls .slide-control[data-v-6b77ddc4]{display:-ms-flexbox;display:flex;border-radius:6px;overflow:hidden;cursor:pointer;height:auto;max-width:48px;width:100%;border:1px solid transparent}.gallery-controls .slide-control.active[data-v-6b77ddc4]{border:1px solid #3C3C87}.gallery-controls .slide-control-image[data-v-6b77ddc4]{-o-object-fit:contain;object-fit:contain;width:100%}.gallery-controls .gallery-control-title[data-v-6b77ddc4]{display:block;font-size:15px;color:#222;margin-bottom:12px}.excerpt-footer[data-v-6b77ddc4]{padding:16px;font-weight:500;font-size:15px;color:#626B77;border-top:1px solid #EAEAEA;text-align:center}@media screen and (min-width: 768px){.excerpt-footer[data-v-6b77ddc4]{display:none}}.progress[data-v-6b77ddc4]{margin-bottom:20px;display:-ms-flexbox;display:flex;-webkit-column-gap:2%;-moz-column-gap:2%;column-gap:2%}@media screen and (min-width: 768px){.progress[data-v-6b77ddc4]{display:none}}.progress .progress-line[data-v-6b77ddc4]{cursor:pointer;height:6px;border-radius:8px;background-color:#E7EBF0;width:100%}.progress .progress-line.active[data-v-6b77ddc4]{background-color:#C4C4C4}\n",""])},1868:function(t,e,r){"use strict";r.r(e);var i=r(21),l=r(2),a=r(385),o=r(0);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],i=!0,l=!1,a=void 0;try{for(var o,n=t[Symbol.iterator]();!(i=(o=n.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){l=!0,a=t}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return r}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b={name:"BookExcerpt",directives:{visible:a.a},props:{showProductGallery:{type:Boolean,default:!0}},data:function(){return{activeSlideIndex:0,activeControlIndex:0,isIntersactionEnabled:!1}},computed:u(u(u({},Object(i.c)({product:"product/getCurrentProduct"})),Object(i.e)({productGallery:function(t){return t.product.productGallery},optimizedProductGallery:function(t){return t.product.optimizedProductGallery}})),{},{excerptGallery:function(){var t;return(null===(t=this.product.mediagallery_image)||void 0===t?void 0:t.length)?this.product.mediagallery_image.map((function(t){return{src:t.image_url}})):[]},isBook:function(){var t;return Object(l.k)(null===(t=this.product)||void 0===t?void 0:t.attribute_set_id)},titleControlGallery:function(){return this.isBook?this.$i18n.t("Cover"):this.$i18n.t("Photo")},titleControlExcerpt:function(){return this.isBook?this.$i18n.t("Passage"):this.$i18n.t("Gallery")},activeGalleryControl:function(){var t=[];return this.showProductGallery&&t.push({title:this.titleControlGallery,gallery:this.optimizedProductGallery}),this.excerptGallery.length&&t.push({title:this.titleControlExcerpt,gallery:this.excerptGallery}),t},activeGallery:function(){return this.showProductGallery?[].concat(d(this.productGallery),d(this.excerptGallery)):this.excerptGallery},isDigitalCertificate:function(){var t;return(null===(t=this.product)||void 0===t?void 0:t.attribute_set_id)===o.entities.product.digitalCertificateId},modalTitle:function(){return this.isDigitalCertificate?this.$t("Design preview"):this.isBook?this.$t("View excerpt"):""}}),mounted:function(){this.$refs["gallery-container"].addEventListener("touchmove",this.initObserver,{once:!0})},beforeDestroy:function(){this.$refs["gallery-container"].removeEventListener("touchmove",this.initObserver)},methods:{setActiveSlide:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smooth";this.isIntersactionEnabled=!0,this.activeSlideIndex=t,this.activeControlIndex=t;var r=this.$refs["slide".concat(t)]||[],i=n(r,1),l=i[0];l&&this.$nextTick((function(){l.scrollIntoView({behavior:e,block:"start"})}))},getInnerIndex:function(t){var e,r,i,l=t.indexControl,a=t.index;return l*((null===(e=this.activeGalleryControl)||void 0===e||null===(r=e[0])||void 0===r||null===(i=r.gallery)||void 0===i?void 0:i.length)||0)+a},hideModal:function(){this.$store.commit("ui/hideModal")},onVisible:function(t){var e=this;return function(r){r.visible&&(e.isIntersactionEnabled?e.activeControlIndex=t:e.$refs["gallery-container"].scrollLeft=0)}},initObserver:function(){this.isIntersactionEnabled=!0}}},y=(r(1570),r(8)),v=Object(y.a)(b,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"book-gallery"},[r("div",{staticClass:"gallery"},[r("div",{staticClass:"gallery-header"},[r("span",{staticClass:"title desktop"},[t._v(t._s(t.product.name))]),t._v(" "),t.modalTitle?r("span",{staticClass:"title mobile"},[t._v("\n        "+t._s(t.modalTitle)+"\n      ")]):t._e()]),t._v(" "),r("div",{staticClass:"gallery-grid"},[r("div",{ref:"gallery-container",staticClass:"gallery-slides",attrs:{"body-scroll-lock-ignore":""}},t._l(t.activeGallery,(function(e,i){return r("div",{directives:[{name:"visible",rawName:"v-visible.multiple",value:t.onVisible(i),expression:"onVisible(index)",modifiers:{multiple:!0}}],key:i,ref:"slide"+i,refInFor:!0,staticClass:"slide product-gallery"},[r("img",{staticClass:"slide-image",attrs:{src:e.src,alt:"gallery-image"}})])})),0),t._v(" "),r("div",{staticClass:"gallery-controls"},t._l(t.activeGalleryControl,(function(e,i){return r("div",{key:i},[r("span",{staticClass:"gallery-control-title"},[t._v(t._s(e.title))]),t._v(" "),r("div",{staticClass:"gallery-control-grid gallery-control"},t._l(e.gallery,(function(e,l){return r("div",{key:t.getInnerIndex({indexControl:i,index:l}),staticClass:"slide-control product-gallery",class:{active:t.activeSlideIndex===t.getInnerIndex({indexControl:i,index:l})},on:{click:function(e){t.setActiveSlide(t.getInnerIndex({indexControl:i,index:l}))}}},[r("img",{staticClass:"slide-control-image",attrs:{src:e.src,alt:"gallery-image-control",loading:"lazy"}})])})),0)])})),0)]),t._v(" "),r("div",{staticClass:"progress"},t._l(t.activeGallery,(function(e,i){return r("div",{key:i,staticClass:"progress-line",class:{active:i===t.activeControlIndex},on:{click:function(e){return t.setActiveSlide(i,"instant")}}})})),0),t._v(" "),r("div",{staticClass:"excerpt-footer",on:{click:function(e){return t.hideModal()}}},[t._v("\n      "+t._s(t.$t("Finish viewing"))+"\n    ")])])])}),[],!1,null,"6b77ddc4",null);e.default=v.exports}}]);
//# sourceMappingURL=book-excerpt.8a8e479dea663b8db14f.js.map